// Определяем сцены квеста
// Создаем объект scenes, где каждая сцена - это ключ со своим текстом и вариантами выбора
const scenes = {
    start: { // Начальная сцена
        text: "Тебя сбивает грузовик-сан и ты попадаешь в волшебный фэнтези мир. Куда пойдешь в первую очередь?",
        choices: [ // Массив вариантов выбора для начальной сцены
            { text: "В таверну. Вдруг у бармена будут интересные слухи", next: "sluhi" }, // Вариант выбора с текстом и следующей сценой
            { text: "Сразу в лес. Кошмарить волков и гоблинов", next: "vles" } // Второй вариант выбора
        ]
    },
    sluhi: { 
        text: "Чтобы пойти в таверну, надо сначала ее найти. Можно спросить у кого-нибудь дорогу или попробовать разобраться самому.",
        choices: [
            { text: "Спросить дорогу", next: "sprosit" },
            { text: "Разобраться самому", next: "samomu" }

        ]
    },
    sprosit: {
        text: "Ты немного прошел по дороге и видишь рыбака, который сидит на берегу. Подходишь к нему и говоришь...",
        choices: [
            { text: "Эй, мужик, где здесь ближайшая деревня?", next: "derevnya" },
            { text: "Не, не буду спрашивать. Вдруг он шиз и что-нибудь сделает? Кто вообще ловит рыбу в глухой местности?", next: "nesprashivat" }
        ]
    },
    derevnya: { 
        text: "Мужик поворачивается к тебе и говорит с удивленным лицом 'Син кем? Каян килеп чыктың?'",
        choices: [
            { text: "О нет", next: "konec" },
            { text: "О нет", next: "konec" }

        ]
    },
    konec: {
        text: "Ты попал в татарофэнтези мир. Конец",
        choices: [
            { text: "Ты умер, потому что не знаешь татарского. (вернуться в начало)", next: "start" }
        ]
    },
    samomu: {
        text: "Ты ходишь указатель со стрелкой. На нем написано:'Сулга-авылга. Уңга-икенче авылга.'",
        choices: [
            { text: "О нет", next: "konec" },
            { text: "О нет", next: "konec" }
        ]
    },
    vles: { 
        text: "Волки и гоблины сами тебя закошмарили. Ну, а что ты ожидал? Опыт в драках то нулевой.",
        choices: [
            { text: "Так дело не пойдет. Давай сначала", next: "start" }
        ] 
    }
};

// Функция для отображения сцены
function showScene(scene) {
    // Получаем элемент для отображения текста истории
    const storyText = document.querySelector('.story-text');
    // Получаем контейнер для кнопок выбора
    const choices = document.querySelector('.choices');
    
    // Устанавливаем текст текущей сцены
    storyText.textContent = scene.text;
    
    // Очищаем контейнер с кнопками выбора
    choices.innerHTML = '';
    // Для каждого варианта выбора создаем кнопку
    scene.choices.forEach(choice => {
        // Создаем новый элемент div для кнопки
        const button = document.createElement('div');
        // Добавляем класс для стилизации
        button.classList.add('choice');
        // Устанавливаем текст кнопки
        button.textContent = choice.text;
        // Добавляем обработчик клика
        button.addEventListener('click', () => showScene(scenes[choice.next]));
        // Добавляем кнопку в контейнер
        choices.appendChild(button);
    });
}

// Начинаем игру после полной загрузки DOM
document.addEventListener('DOMContentLoaded', () => {
    // Показываем начальную сцену
    showScene(scenes.start);
});
